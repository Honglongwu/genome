<?xml version='1.0' standalone='yes'?>
<workflow name="RealignWithVcf">
    <link fromOperation="input connector" fromProperty="input_vcf" toOperation="VcfToDindel" toProperty="input_vcf" />
    <link fromOperation="input connector" fromProperty="ref_fasta" toOperation="VcfToDindel" toProperty="ref_fasta" />
    <link fromOperation="input connector" fromProperty="output_directory" toOperation="VcfToDindel" toProperty="output_directory" />

    <link fromOperation="VcfToDindel" fromProperty="output_dindel_file" toOperation="RealignCandidates" toProperty="input_dindel_file" />
    <link fromOperation="input connector" fromProperty="ref_fasta" toOperation="RealignCandidates" toProperty="ref_fasta" />
    <link fromOperation="input connector" fromProperty="output_directory" toOperation="RealignCandidates" toProperty="output_directory" />

    <link fromOperation="input connector" fromProperty="input_bam" toOperation="GetCigarIndels" toProperty="input_bam" />
    <link fromOperation="input connector" fromProperty="ref_fasta" toOperation="GetCigarIndels" toProperty="ref_fasta" />
    <link fromOperation="input connector" fromProperty="output_directory" toOperation="GetCigarIndels" toProperty="output_directory" />

    <link fromOperation="RealignCandidates" fromProperty="output_dindel_file" toOperation="MakeDindelWindows" toProperty="input_dindel_file" />
    <link fromOperation="input connector" fromProperty="output_directory" toOperation="MakeDindelWindows" toProperty="output_directory" />

    <link fromOperation="MakeDindelWindows" fromProperty="window_file" toOperation="AnalyzeWindowFile" toProperty="window_file" />
    <link fromOperation="GetCigarIndels" fromProperty="output_libraries" toOperation="AnalyzeWindowFile" toProperty="library_metrics_file" />
    <link fromOperation="input connector" fromProperty="input_bam" toOperation="AnalyzeWindowFile" toProperty="input_bam" />
    <link fromOperation="input connector" fromProperty="ref_fasta" toOperation="AnalyzeWindowFile" toProperty="ref_fasta" />
    <link fromOperation="input connector" fromProperty="output_directory" toOperation="AnalyzeWindowFile" toProperty="output_directory" />

    <link fromOperation="AnalyzeWindowFile" fromProperty="output_bam" toOperation="output connector" toProperty="output_bam" />
    <link fromOperation="AnalyzeWindowFile" fromProperty="output_glf" toOperation="output connector" toProperty="output_glf" />

    <operation name="VcfToDindel">
        <operationtype commandClass="Genome::Model::Tools::Dindel::VcfToDindel" typeClass="Workflow::OperationType::Command" />
    </operation>
    <operation name="RealignCandidates">
        <operationtype commandClass="Genome::Model::Tools::Dindel::RealignCandidates" typeClass="Workflow::OperationType::Command" />
    </operation>
    <operation name="GetCigarIndels">
        <operationtype commandClass="Genome::Model::Tools::Dindel::GetCigarIndels" typeClass="Workflow::OperationType::Command" />
    </operation>
    <operation name="MakeDindelWindows">
        <operationtype commandClass="Genome::Model::Tools::Dindel::MakeDindelWindows" typeClass="Workflow::OperationType::Command" />
    </operation>
    <operation name="AnalyzeWindowFile">
        <operationtype commandClass="Genome::Model::Tools::Dindel::AnalyzeWindowFile" typeClass="Workflow::OperationType::Command" />
    </operation>

    <operationtype typeClass="Workflow::OperationType::Model">
        <inputproperty>input_bam</inputproperty>
        <inputproperty>ref_fasta</inputproperty>
        <inputproperty>input_vcf</inputproperty>
        <inputproperty>output_directory</inputproperty>

        <outputproperty>output_bam</outputproperty>
        <outputproperty>output_glf</outputproperty>
    </operationtype>
</workflow>
