#!/usr/bin/env genome-perl
use strict;
use warnings;

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

use above 'Genome';
use Test::More;
use Genome::Model::RnaSeq::DetectFusionsResult::Chimerascan::TestHelpers qw(setup);

my $picard_version = 1.82;
my $chimerascan_version = '0.4.5';
my $chimerascan_result_class = "Genome::Model::RnaSeq::DetectFusionsResult::Chimerascan::Result";
use_ok($chimerascan_result_class);
my ($alignment_result, $annotation_build, @bam_files) = setup(test_data_version => 4,
        chimerascan_version => $chimerascan_version,
        chimerascan_result_class => $chimerascan_result_class,
        picard_version => $picard_version);

my $no_bam_result = Genome::Model::RnaSeq::DetectFusionsResult::Chimerascan::Result->get_or_create(
    picard_version => $picard_version,
    alignment_result => $alignment_result,
    version => $chimerascan_version,
    detector_params => "--bowtie-version=0.12.7 --reuse-bam 0",
    annotation_build => $annotation_build,
    original_bam_paths => \@bam_files,
);
isa_ok($no_bam_result, "Genome::Model::RnaSeq::DetectFusionsResult::Chimerascan::Result");

done_testing();

1;
